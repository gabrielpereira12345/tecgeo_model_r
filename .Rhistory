#| echo: false
library(dplyr)
library(ggplot2)
library(tibble)
library(readxl)
library(rsample)
library(tune)
library(tune)
library(recipes)
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_carac <- read_xlsx(path = "IMOVEIS_TABELACARACTERISTICAS_IBGE.xlsx")
df_renda <- read_xlsx(path = "IMOVEIS_TABELARENDA_IBGE.xlsx")
df_basica |> View()
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_carac <- read_xlsx(path = "IMOVEIS_TABELACARACTERISTICAS_IBGE.xlsx")
df_renda <- read_xlsx(path = "IMOVEIS_TABELARENDA_IBGE.xlsx")
df_basica |> View()
glimpse(df_basica)
df_basica$zona |> unique()
df_basica$N_BAIRRO |> unique()
df_basica
df_basica |> col()
df_basica |> colnames()
library(skimr)
library(ggplot2)
install.packages(skimr)
library(skimr)
install.packages(skimr)
install.packages("skimr")
library(skimr)
df_basica |> skim()
library(visdat)
#| warning: false
library(dplyr)
library(skimr)
library(ggplot2)
library(tibble)
library(readxl)
library(rsample)
library(tune)
library(recipes)
library(visdat)
df_basica |> colnames()
colnames
df_basica |> colnames()
df_basica |> summary()
df_basica |> summary() |> typeof()
df_basica |> summary() |> as.tibble()
library(stringr)
df_basica |> colnames() |> str_starts("var")
df_basica[df_basica |> colnames() |> str_starts("var"),]
df_basica[df_basica |> colnames() |> str_starts("var") |> as.vector(),]
df_basica[, df_basica |> colnames() |> str_starts("var")]
df_basica[, -df_basica |> colnames() |> str_starts("var")]
df_basica[, -df_basica |> colnames() |> str_starts("var") |> as.vector()]
df_basica[, -c(df_basica |> colnames() |> str_starts("var"))]
df_basica |> colnames()
df_basica[, which(df_basica |> colnames() |> str_starts("var_"))]
df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica[, -c(prev)]
df_basica[, -c("prev")]
df_basica |> select(-c(prev))
df_basica
vis_dat(df_basica)
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
gc()
gc()
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <-  df_basica |> select(-c(prev))
vis_dat(dplyr::slice_sample(df_basica))
df_basica |> skim()
df_basica |> glimpse()
df_basica |> file(is.na())
df_basica |> file(is.na(df_basica |> colnames()))
df_basica |> select(everything())
df_basica |> colMeans(is.na())
df_basica |> is.na()
df_basica |> is.na() |> colMeans()
df_basica |> is.na() |> sum()
df_basica |> is.na() |> colSums()
everything()
df_basica |> everything()
df_basica |> filter(across(everything()))
df_basica |> is.na() |> colSums() |> typeof()
df_basica |> is.na() |> colSums()
df_basica |> is.na() |> colSums() |> is.atomic()
df_basica |> is.na() |> colSums() |> names()
df_basica |> is.na() |> colSums()
df_basica |> is.na() |> colSums() > 0
df_basica |> is.na() |> rowSums() > 0
which(df_basica |> is.na() |> rowSums() > 0)
df_basica |> is.na() |> colSums() > 0
df_basica <- df_basica[which(df_basica |> is.na() |> rowSums() > 0),]
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <-  df_basica |> select(-c(prev))
df_basica <- df_basica[which(df_basica |> is.na() |> rowSums() != 0),]
df_basica |> is.na() |> colSums()
df_basica <- df_basica[which(df_basica |> is.na() |> rowSums() != 0),]
df_renda <- read_xlsx(path = "IMOVEIS_TABELARENDA_IBGE.xlsx")
df_renda <- read_xlsx(path = "IMOVEIS_TABELARENDA_IBGE.xlsx")
df_renda <- read_xlsx(path = "IMOVEIS_TABELARENDA_IBGE.xlsx")
df_carac <- read_xlsx(path = "IMOVEIS_TABELACARACTERISTICAS_IBGE.xlsx")
df_basica |> is.na() |> colSums()
df_basica <- df_basica[which(df_basica |> is.na() |> rowSums() != 0),]
df_basica |> is.na() |> colSums()
df_basica |> is.na() |> colSums()
which(df_basica |> is.na() |> rowSums() != 0)
df_basica |> is.na() |> colSums()
which(df_basica |> is.na() |> rowSums())
df_basica |> is.na() |> rowSums()
df_basica |> is.na() |> rowSums() |> len()
df_basica |> is.na() |> rowSums() |> length()
df_basica
df_basica |> is.na() |> rowSums()
df_basica |> is.na()
df_basica |> is.na() |> sum()
df_basica |> is.na() |> rowsum()
df_basica |> is.na() |> rowSums()
complete.cases(df_basica)
df_basica |> !is.na() |> colSums()
df_basica |> is.na() |> colSums(!)
rowSums(!is.na(df_basica))
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <-  df_basica |> select(-c(prev))
rowSums(!is.na(df_basica))
rowSums(!is.na(df_basica)) != 0
which(rowSums(!is.na(df_basica)) != 0)
df_basica
df_basica <- df_basica[which(rowSums(!is.na(df_basica)) != 0),]
df_renda |> is.na() |> colSums()
getwd()
library(ggplot2)
library(tibble)
library(readxl)
library(rsample)
library(tune)
library(recipes)
library(visdat)
library(stringr)
library(corrr)
df_renda <- read_xlsx(path = "IMOVEIS_TABELARENDA_IBGE.xlsx")
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <-  df_basica |> select(-c(prev))
df_basica |> View()
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <-  df_basica |> select(-c(prev))
df_basica[which(!(rowSums(is.na(df_basica)) != 0)),]
df_basica[which(!(rowSums(is.na(df_basica)) != 0)),]
df_basica |> is.na() |> colSums()
df_basica <- df_basica |> drop_na()
library(tidyr)
library(tidyr)
df_basica |> drop_na()
df_basica <- df_basica |> drop_na()
df_renda |> is.na() |> colSums()
df_basica |> is.na() |> colSums()
df_basica |> vis_dat()
df_renda |> is.na() |> colSums()
df_renda |> drop_na(NM_MUNICIP)
df_renda |> drop_na(NM_MUNICIP) |> is.na() |> colSums()
df_renda |> df_renda |> drop_na()
df_renda <-  df_renda |> drop_na()
df_renda <-  df_renda |> drop_na()
df_renda |> View()
df_basica |> correlate()
df_basica |> correlate() |> View()
corr_basica["valor"]
corr_basica <- df_basica |> correlate() |> View()
corr_basica <- df_basica |> correlate() |> View()
corr_basica["valor"]
corr_basica <- df_basica |> correlate()
corr_basica <- df_basica |> correlate()
corr_basica["valor"]
df_basica |> correlate()
df_basica |> correlate() |> corr()
remove(corr_basica)
corr_basica <- df_basica |>
select_if(is.numeric)
corr_basica <- df_basica |>
select_if(is.numeric)
correlate() |>
focus(valor) |>
rearrange() |>
shave()
corr_basica <- df_basica |>
correlate() |>
focus(valor) |>
rearrange() |>
shave()
corr_basica <- df_basica |>
correlate() |>
focus(valor) |>
arrange() |>
shave()
corr_basica <- df_basica |>
correlate() |>
focus(valor) |>
arrange() |>
shave()
correlate() |>
focus(valor) |>
arrange() |>
shave()
corr_basica <- df_basica |>
select_if(is_numeric)
corr_basica <- df_basica |>
select_if(is_numeric())
corr_basica <- df_basica |>
select_if(is_numeric)
corr_basica <- df_basica |>
select_if(is_numeric)
corr_basica <- df_basica |>
select_if(is.numeric)
correlate() |>
focus(valor) |>
arrange() |>
shave()
dplyr)
library(dplyr)
library(corrr)
corr_basica <- df_basica %>%
select_if(is.numeric) %>%
correlate() %>%
focus(valor) %>%
arrange() %>%
shave()
library(corrr)
corr_basica <- df_basica %>%
select_if(is.numeric) %>%
correlate() %>%
focus(valor) %>%
arrange() %>%
shave()
corr_basica <- df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(valor) |>
arrange() |>
shave()
corr_basica <- df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(valor) |>
arrange() |>
shave()
df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(valor) |>
arrange() |>
shave()
corr_basica <- df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(valor, mirror = TRUE) |>
arrange() |>
shave()
corr_basica <- df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(valor, mirror = TRUE) |>
arrange() |>
shave()
corr_basica
df_basica |>
select_if(is.numeric) |>
correlate()
corr_basica <- df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(mirror = TRUE) |>
arrange() |>
shave()
corr_basica
corr_basica <- df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(valor, mirror = TRUE) |>
arrange() |>
shave()
corr_basica <- df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(-valor, mirror = TRUE) |>
arrange() |>
shave()
corr_basica
corr_basica <- df_basica |>
select_if(is.numeric) |>
correlate() |>
focus(everything(), mirror = TRUE) |>
arrange() |>
shave()
corr_basica
corr_basica |> rplot()
corr_basica
corr_basica |> View()
corr_matrix_basica <- df_basica |>
select_if(is.numeric) |>
correlate()
corr_matrix_basica
corr_matrix_basica |> View()
corr_matrix_basica <- df_basica |>
select_if(is.numeric) |>
correlate(diagonal = 1)
corr_matrix_basica |> View()
corr_matrix <- function(df){
df |>
select_if(is.numeric) |>
correlate(diagonal = 1) |>
View()
}
df_basica |> corr_matrix()
df_basica |> corr_matrix()
df_basica |> corr_matrix()
df_renda |> corr_matrix()
df
corr_matrix <- function(df_){
df |>
select_if(is.numeric) |>
correlate(diagonal = 1) |>
View()
}
df_basica |> corr_matrix()
corr_matrix <- function(df_){
df_ |>
select_if(is.numeric) |>
correlate(diagonal = 1) |>
View()
}
df_basica |> corr_matrix()
df_basica |> corr_matrix()
df_basica |> corr_matrix()
df_renda |> corr_matrix()
df_basica |> corr_matrix()
df_renda |> corr_matrix()
df_renda
df_basica
df_basica |> is.na() |> colSums()
df_basica |> sapply(\(x) sum(is.na(x)))
df_basica |> View()
df_basica |> View()
df_basica |> sapply(\(x) sum(is.na(x)))
df_basica |> sapply(\(x) sum(is.na(x)))
df_basica <- df_basica |> drop_na()
df_basica |> sapply(\(x) sum(is.na(x)))
library(purrr)
df_basica |> map(\(x) sum(is.na(.)))
df_basica |> map(\(x) sum(is.na(x)))
df_renda |> map(\(x) sum(is.na(x)))
df_basica |> map(~sum(is.na(.)))
df_basica |> map(\(x) sum(is.na(x)))
df_renda |> corr_matrix()
df_basica |> corr_matrix()
df_renda |> corr_matrix()
df_renda |> View()
corr_matrix <- function(df_){
df_ |>
select_if(is.numeric) |>
correlate(diagonal = 1)
}
df_basica |> corr_matrix()
df_basica |> corr_matrix() |>
df_renda |> corr_matrix()
banco |>
select_if(is.numeric) |>
correlate(diagonal = 1)
corr_matrix <- function(banco){
banco |>
select_if(is.numeric) |>
correlate(diagonal = 1)
}
df_renda |> corr_matrix()
df_basica |> corr_matrix() |>
df_renda |> glimpse
df_basica |> corr_matrix() |>
df_renda |> glimpse()
df_renda |> glimpse()
df_basica |> glimpse()
remove(c("df_carac', "corr_matrix_basica"))
remove("df_carac', "corr_matrix_basica")
remove("corr_matrix_basica")
remove("df_carac")
remove("corr_basica")
#|echo: true
df_basica |> glimpse()
df_basica |> select_if(is_character)
df_basica |> select_if(is_character)
typeof(TRUE)
num_fea <- df_basica |>
select_if(is_character) |>
filter(c("quarto", "vaga", "banheiro"))
num_fea <- df_basica |>
select_if(is_character) |>
select(c("quarto", "vaga", "banheiro"))
num_fea
df_basica |>
select_if(is_character)
num_fea_basica <- df_basica |>
select_if(is_character) |>
select(c(quarto:banheiro))
num_fea_basica
df_basica[num_fea_basica] <- df_basica[num_fea_basica] |> sapply(as.numeric)
num_fea_basica <- df_basica |>
select_if(is_character) |>
select(c(quarto:banheiro)) |>
colnames()
num_fea_basica
df_basica[num_fea_basica] <- df_basica[num_fea_basica] |> sapply(as.numeric)
df_basica
df_basica |> View()
df_basica |> glimpse()
logical_fea_basica <- df_basica |>
select_if(is_logical) |>
select(piscina:spa) |>
colnames()
logical_fea_basica <- df_basica |>
select_if(is_logical) |>
select(c(piscina:spa)) |>
colnames()
logical_fea_basica <- df_basica |>
select_if(is_character) |>
select(piscina:spa) |>
colnames()
df_basica[logical_fea_basica] <- df_basica[logical_fea_basica] |> sapply(as.logical)
df_basica |> glimpse()
df_renda |> glipse()
df_renda |> glimpse()
df_renda[num_fea_renda] <- df_renda[num_fea_renda] |> sapply(as.numeric)
num_fea_renda <- df_basica |>
select_if(is_character) |>
select(c(quarto:banheiro, total_de_dom_par_impro:dom_par_sem_rendimento_nominal_men_domiciliar_per_capita)) |>
colnames()
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_basica <- read_xlsx(path = "IMOVEIS_TABELABASICA_IBGE.xlsx")
df_renda <- read_xlsx(path = "IMOVEIS_TABELARENDA_IBGE.xlsx")
df_basica |> glimpse()
num_fea_basica <- df_basica |>
select_if(is_character) |>
select(quarto:banheiro) |>
colnames()
logical_fea <- df_basica |>
select_if(is_character) |>
select(piscina:spa) |>
colnames()
df_basica[num_fea_basica] <- df_basica[num_fea_basica] |> sapply(as.numeric)
df_basica[logical_fea_basica] <- df_basica[logical_fea_basica] |> sapply(as.logical)
df_renda |> glimpse()
df_renda |> glimpse()
num_fea_renda <- df_basica |>
select_if(is_character) |>
select(c(quarto:banheiro, total_de_dom_par_impro:dom_par_sem_rendimento_nominal_men_domiciliar_per_capita)) |>
colnames()
num_fea_renda
num_fea_renda <- df_basica |>
select_if(is_character) |>
select(c(quarto:banheiro, total_de_dom_par_impro:dom_par_sem_rendimento_nominal_men_domiciliar_per_capita)) |>
colnames()
num_fea_renda <- df_renda |>
select_if(is_character) |>
select(c(quarto:banheiro, total_de_dom_par_impro:dom_par_sem_rendimento_nominal_men_domiciliar_per_capita)) |>
colnames()
df_renda[logical_fea_basica] <- df_renda[logical_fea_basica] |> sapply(as.logical)
df_renda |> glimpse()
df_renda[num_fea_renda] <- sapply(df_renda[num_fea_renda], as.numeric)
df_renda[logical_fea_basica] <- sapply(df_renda[logical_fea_basica], as.logical)
df_renda |> glimpse()
df_basica |> glimpse()
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <- df_basica[, which(df_basica |> colnames() |> str_starts("var_", negate = TRUE))]
df_basica <-  df_basica |> select(-c(prev))
df_renda <- df_basica |> select(-prev)
df_renda <- df_basica |> select(-c(prev))
df_renda <- df_renda |> select(-c(prev))
df_basica <-  df_basica |> select(-prev)
df_basica |> map(\(x) sum(is.na(x)))
